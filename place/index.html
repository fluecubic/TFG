<!DOCTYPE html>
<html>
    <head>
        <title>TFG/Place</title>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="css.css">
    <link rel="shortcut icon" href="/TFG/assets/LOGO.png" type="image/x-icon">
    </head>
    <body>
        <div id="leiste">
            <a href="/TFG/index.html"><h1 id="">TFG/Place</h1></a>

            <a href="/TfG/login/login.html">
        <img id="user-icon" src="/TFG/assets/user.png">
        </a>
        </div>
        <iframe src="./canva.html#canva" id="canvas"></iframe>

        <div id="leistecolor">
            <p id="time"></p>
            <div class="color" id="red"></div>
            <div class="color" id="green"></div>
            <div class="color" id="blue"></div>
            <div class="color" id="purple"></div>
            <div class="color" id="black"></div>
            <div class="color" id="gray"></div>
            <div class="color" id="white"></div>
            <div class="color" id="brown"></div>
            <div class="color" id="pink"></div>
            <div class="color" id="yellow"></div>
            <div class="color" id="orange"></div>
            <button id="plus">+</button>
            <button id="minus">-</button>
        </div>



          <div id="inputs">
     <input id="name" type="text" placeholder="Vorname">
     <br>
     <input id="surname" type="text" placeholder="Nachname">
     <br>
     <input id="password" type="password" placeholder="Passwort">
     <br>
     <p id="mecker"> </p>
    
        <p ID="classinf">In welche Klasse gehts du? <br>(Wenn du dich in den Sommerferien registrierst, w√§hle die Klasse aus, in die du gegangen bist.)</p>
        <br>
        <select  id="class">
          </select>
     </div>
    
      
        <div id="options">
     <button id="login">Regristrieren</button>
     <button id="signin">Anmelden</button>
    </div> 
     <button id="logout">Abmelden</button>
        </div>
    </body>

    <script type="module">
      import {user} from "/TFG/login/login.js"

        let scale = 1;

function applyZoom() {
  const iframe = document.getElementById("canvas");
  const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
  iframeDoc.body.style.transform = `scale(${scale})`;
  iframeDoc.body.style.transformOrigin = "0 0";
}

function zoomIn() {
  scale += 0.1;
  applyZoom();
}

function zoomOut() {
  scale = Math.max(0.1, scale - 0.1);
  applyZoom();
}


document.getElementById("canvas").addEventListener("wheel", (e) => {
  if (e.ctrlKey) {
    e.preventDefault();
    if (e.deltaY < 0) {
      zoomIn();
    } else {
      zoomOut();
    }
  }
});

document.getElementById("plus").onclick = zoomIn;
document.getElementById("minus").onclick = zoomOut;

let color = "black"

document.addEventListener("click", function (event) {
    if (event.target.classList.contains("color")) {
      color = event.target.id;  
      sessionStorage.setItem("color", color);
      document.getElementById("black").style.border ="0px";
      document.getElementById("white").style.border ="0px";
      document.getElementById("green").style.border ="0px";
      document.getElementById("blue").style.border ="0px";
      document.getElementById("red").style.border ="0px";
      document.getElementById("pink").style.border ="0px";
      document.getElementById("purple").style.border ="0px";
      document.getElementById("orange").style.border ="0px";
      document.getElementById("brown").style.border ="0px";
      document.getElementById("yellow").style.border ="0px";
      document.getElementById("gray").style.border ="0px";
     
      document.getElementById(event.target.id).style.border = "5px solid white"
    
    }
  });
   

  let remaininTime = 4;

  const out = setInterval(() => {
    remaininTime =sessionStorage.getItem("delay");
    remaininTime = remaininTime - 1;
    document.getElementById("time").innerHTML = String(remaininTime);
    sessionStorage.setItem("delay", remaininTime)
    if (remaininTime < 0) {
        document.getElementById("time").innerHTML = "0";
        document.getElementById("canvas").style.cursor = "crosshair"
        
    }
  }, 1000);

document.getElementById("name").style.display = "none"
    document.getElementById("password").style.display = "none"
    document.getElementById("login").style.display = "none"
    document.getElementById("signin").style.display = "none"
    document.getElementById("logout").style.display = "none"
    document.getElementById("class").style.display = "none"
    document.getElementById("mecker").style.display = "none"
    document.getElementById("classinf").style.display = "none"
    document.getElementById("surname").style.display = "none"


    

    if (user.uid) {
       console.log(user) 
       sessionStorage.setItem("User", user.uid)
    } else {
      window.location = "/TFG/login/login.html"
    }

    </script>
  
</html>